<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Qu·∫£n l√Ω ch∆∞∆°ng tr√¨nh</title>
    <link rel="stylesheet" href="css/style.css" />
    <style>
        .toolbar {
            display: flex;
            gap: 12px;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .left-tools {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .btn-add {
            background: #28a745;
            color: #fff;
            padding: 8px 14px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
        }

        .btn-add:hover {
            background: #218838;
        }

        .search-area {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .search-area input {
            padding: 8px 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
        }

        .data-table th,
        .data-table td {
            padding: 10px 8px;
            text-align: left;
        }

        .actions button {
            margin-right: 6px;
            padding: 6px 8px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
        }

        .btn-edit {
            background: #ffc107;
            color: #111;
        }

        .btn-delete {
            background: #dc3545;
            color: #fff;
        }

        .btn-toggle {
            background: #17a2b8;
            color: #fff;
        }

        /* modal */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.45);
            align-items: center;
            justify-content: center;
            z-index: 999;
        }

        .modal-content {
            background: #fff;
            width: 720px;
            max-width: 95%;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .form-group.full {
            grid-column: 1 / -1;
        }

        .modal-actions {
            margin-top: 14px;
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .btn-save {
            background: #007bff;
            color: #fff;
            padding: 8px 14px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
        }

        .btn-cancel {
            background: #6c757d;
            color: #fff;
            padding: 8px 14px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
        }

        .small-muted {
            color: #666;
            font-size: 13px;
        }

        @media (max-width:640px) {
            .form-grid {
                grid-template-columns: 1fr;
            }

            .toolbar {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }
        }
    </style>

    <script type="module" src="js/firebaseConfig.js"></script>
    <script type="module" src="js/menu.js"></script>
    <script type="module" src="js/chuongtrinh.js"></script>
</head>

<body>
    <div id="menu"></div>

    <main class="container">
        <h1>üéØ Qu·∫£n l√Ω ch∆∞∆°ng tr√¨nh / khuy·∫øn m√£i</h1>

        <div class="toolbar">
            <div class="left-tools">
                <button id="btnOpenAdd" class="btn-add">‚ûï Th√™m ch∆∞∆°ng tr√¨nh</button>
                <button id="btnOpenCouponPhieu" class="btn-add" style="background:#ff9800;">üéüÔ∏è Th√™m Coupon | Phi·∫øu
                    chi</button>
                <!-- N√∫t xem danh s√°ch coupon / phi·∫øu chi -->
                <button id="btnViewCoupons" class="btn-add" style="background:#673ab7;">
                    üìã Xem danh s√°ch Coupon | Phi·∫øu chi
                </button>
            </div>


            <div class="search-area">
                <input type="text" id="searchInput" placeholder="T√¨m theo m√£ ho·∫∑c t√™n..." />
                <button id="btnSearch" class="btn-search">T√¨m</button>
                <button id="btnClear" class="btn-clear">X√≥a</button>
            </div>
        </div>

        <table class="data-table" style="width:100%; border-collapse:collapse;">
            <thead>
                <tr style="background:#f4f6f8;">
                    <th style="width:80px">M√£</th>
                    <th>T√™n ch∆∞∆°ng tr√¨nh</th>
                    <th style="width:160px">Th·ªùi gian</th>
                    <th style="width:110px">Gi·∫£m</th>
                    <th style="width:80px">Tr·∫°ng th√°i</th>
                    <th style="width:200px">Ghi ch√∫</th>
                    <th style="width:160px">H√†nh ƒë·ªông</th>
                </tr>
            </thead>
            <tbody id="listPrograms"></tbody>
        </table>
    </main>

    <!-- Modal ch∆∞∆°ng tr√¨nh -->
    <div id="modalProgram" class="modal">
        <div class="modal-content">
            <h2 id="modalTitle">‚ûï Th√™m ch∆∞∆°ng tr√¨nh</h2>
            <form id="formProgram">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="code">M√£</label>
                        <input type="text" id="code" required placeholder="VD: KHUYEN10" />
                    </div>
                    <div class="form-group">
                        <label for="name">T√™n ch∆∞∆°ng tr√¨nh</label>
                        <input type="text" id="name" required />
                    </div>
                    <div class="form-group">
                        <label for="startDate">B·∫Øt ƒë·∫ßu</label>
                        <input type="date" id="startDate" required />
                    </div>
                    <div class="form-group">
                        <label for="endDate">K·∫øt th√∫c</label>
                        <input type="date" id="endDate" required />
                    </div>
                    <div class="form-group">
                        <label for="type">Lo·∫°i gi·∫£m</label>
                        <select id="type">
                            <option value="percent">%</option>
                            <option value="amount">‚Ç´</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="value">Gi√° tr·ªã</label>
                        <input type="number" id="value" min="0" required />
                    </div>
                    <div class="form-group full">
                        <label for="note">Ghi ch√∫</label>
                        <input type="text" id="note" />
                    </div>
                    <div class="form-group">
                        <label for="active">Tr·∫°ng th√°i</label>
                        <select id="active">
                            <option value="true">K√≠ch ho·∫°t</option>
                            <option value="false">T·∫°m d·ª´ng</option>
                        </select>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn-save">üíæ L∆∞u</button>
                    <button type="button" id="btnCancel" class="btn-cancel">‚ùå H·ªßy</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Coupon | Phi·∫øu chi -->
    <div id="modalCouponPhieu" class="modal">
        <div class="modal-content">
            <h2>üéüÔ∏è T·∫°o Coupon / Phi·∫øu chi</h2>
            <form id="formCouponPhieu">
                <div class="form-group">
                    <label>Lo·∫°i</label>
                    <select id="loai">
                        <option value="coupon">COUPON</option>
                        <option value="phieuchi">PHI·∫æU CHI</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>SƒêT kh√°ch h√†ng</label>
                    <input type="text" id="sdt" required placeholder="VD: 0912345678" pattern="[0-9]{9,11}" />
                </div>
                <div class="form-group">
                    <label>S·ªë ti·ªÅn</label>
                    <input type="number" id="soTien" required placeholder="VD: 50000" min="0" />
                </div>
                <div class="form-group full">
                    <label>N·ªôi dung</label>
                    <textarea id="noiDung" rows="3" required
                        placeholder="Nh·∫≠p n·ªôi dung phi·∫øu ho·∫∑c coupon..."></textarea>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn-save">üíæ L∆∞u</button>
                    <button type="button" id="btnCancelCouponPhieu" class="btn-cancel">‚ùå H·ªßy</button>
                </div>
            </form>
        </div>
    </div>


    <!-- Modal danh s√°ch coupon -->
    <div id="modalListCoupons" class="modal">
        <div class="modal-content" style="width:800px; max-height:90vh; overflow:auto;">
            <h2>üìã Danh s√°ch Coupon / Phi·∫øu chi</h2>

            <div style="display:flex; gap:8px; margin-bottom:10px;">
                <input type="text" id="searchCoupon" placeholder="T√¨m theo m√£ ho·∫∑c SƒêT..."
                    style="flex:1; padding:8px; border-radius:6px; border:1px solid #ccc;">
                <button id="btnSearchCoupon" class="btn-save">T√¨m</button>
                <button id="btnClearCoupon" class="btn-cancel">X√≥a</button>
            </div>

            <table style="width:100%; border-collapse:collapse;" class="data-table">
                <thead style="background:#f5f5f5;">
                    <tr>
                        <th>M√£</th>
                        <th>Lo·∫°i</th>
                        <th>SƒêT</th>
                        <th>S·ªë ti·ªÅn</th>
                        <th>N·ªôi dung</th>
                        <th>Tr·∫°ng th√°i</th>
                        <th>Ng√†y t·∫°o</th>
                    </tr>
                </thead>
                <tbody id="listCoupons"></tbody>
            </table>

            <div class="modal-actions">
                <button id="btnCloseCouponList" class="btn-cancel">‚ùå ƒê√≥ng</button>
            </div>
        </div>
    </div>

</body>

</html>